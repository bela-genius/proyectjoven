{% extends 'base.html' %}

{% block content %}
<div class="week-container">
    <a href="{{ url_for('index') }}" class="back-link">‚Üê Volver al inicio</a>
    <h2 class="week-title">Semana {{ week_num }}</h2>
    
    <div class="days-container">
        {% for i in range(1, 4) %}
        <div class="day-card">
            <h3>{{ days[i].title }}</h3>
            <div class="day-content">
                {% if days[i].description %}
                <p style="white-space: pre-wrap; margin-bottom: 1.5rem;">{{ days[i].description }}</p>
                {% endif %}

                {% if days[i].activities %}
                <ul class="activities-list">
                    {% for activity in days[i].activities %}
                    <li>{{ activity }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
                
                {% if days[i].links %}
                <div class="links-section">
                    <h4>üîó Enlaces √∫tiles</h4>
                    <ul style="list-style: none; padding: 0;">
                    {% for link in days[i].links %}
                        <li style="margin-bottom: 0.5rem;"><a href="{{ link }}" target="_blank">{{ link }}</a></li>
                    {% endfor %}
                    </ul>
                </div>
                {% endif %}
                
                {% if days[i].files %}
                <div class="files-section">
                    <h4>üìÇ Documentaci√≥n</h4>
                    <ul style="list-style: none; padding: 0;">
                    {% for file in days[i].files %}
                        <li style="margin-bottom: 0.5rem;"><a href="{{ url_for('static', filename='uploads/' + file.saved) }}" target="_blank">üìÑ {{ file.original }}</a></li>
                    {% endfor %}
                    </ul>
                </div>
                {% endif %}

                {% if days[i].evidence %}
                <div class="evidence-section" style="margin-top: 1.5rem; border-top: 1px dashed var(--primary-light); padding-top: 1rem;">
                    <h4 style="color: var(--primary-dark);">üì∏ Evidencias</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; margin-top: 0.5rem;">
                    {% for file in days[i].evidence %}
                        <a href="{{ url_for('static', filename='uploads/' + file.saved) }}" target="_blank">
                            <img src="{{ url_for('static', filename='uploads/' + file.saved) }}" alt="{{ file.original }}" style="width: 100%; aspect-ratio: 1; object-fit: cover; border-radius: 8px; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        </a>
                    {% endfor %}
                    </div>
                </div>
                {% endif %}

                <div class="student-upload" style="margin-top: 1.5rem; padding: 1rem; background: #fff9fb; border-radius: 12px; border: 1px solid #ffe4ef;">
                    <h4 style="font-size: 0.9rem; color: var(--primary); margin-bottom: 0.5rem;">üì§ Subir mi evidencia</h4>
                    <form action="{{ url_for('upload_evidence', week=week_num, day=i) }}" method="post" enctype="multipart/form-data" style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <input type="file" name="evidence_file" accept="image/*" required style="font-size: 0.8rem; flex: 1;">
                        <button type="submit" style="padding: 0.5rem 1rem; font-size: 0.8rem;">Enviar</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
